<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­çˆ»æ’ç›˜ç³»ç»Ÿ - ç»¼åˆæµ‹è¯•å¥—ä»¶</title>
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            margin: 20px;
            background: #f5f5f5;
            line-height: 1.6;
        }

        .test-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .test-title {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .test-case {
            background: #f9f9f9;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
            border-radius: 4px;
        }

        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }

        .result.pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result.fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .result.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        .data-table th,
        .data-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .data-table th {
            background: #f2f2f2;
            font-weight: bold;
        }

        .summary {
            background: #e3f2fd;
            border: 1px solid #1976d2;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .algorithm-analysis {
            background: #f0f8ff;
            border: 1px solid #4169e1;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .bug-report {
            background: #ffe4e1;
            border: 1px solid #ff6347;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .improvement-suggestion {
            background: #f0fff0;
            border: 1px solid #32cd32;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .hexagram-visual {
            font-family: monospace;
            font-size: 1.2rem;
            text-align: center;
            margin: 10px 0;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>å…­çˆ»æ’ç›˜ç³»ç»Ÿ - ç»¼åˆåŠŸèƒ½æµ‹è¯•ä¸åˆ†ææŠ¥å‘Š</h1>

        <div class="test-section">
            <h2 class="test-title">ğŸ” 1. ä»£ç è´¨é‡åˆ†æ</h2>
            <div id="code-analysis-results"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">â° 2. æ—¶é—´èµ·å¦ç®—æ³•æ·±åº¦æµ‹è¯•</h2>
            <div id="time-divination-analysis"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ² 3. æ•°å­—èµ·å¦ç²¾ç¡®æ€§éªŒè¯</h2>
            <div id="number-divination-analysis"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ“š 4. çº³ç”²é…ç½®å¯¹ç…§æ ‡å‡†éªŒè¯</h2>
            <div id="najia-verification"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ‰ 5. å…­ç¥å…­äº²è®¡ç®—ç²¾åº¦æµ‹è¯•</h2>
            <div id="liushen-liuqin-analysis"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸŒ 6. ä¸–åº”ç©ºäº¡ç»¼åˆæµ‹è¯•</h2>
            <div id="shiying-kongwang-analysis"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ”„ 7. å¦è±¡å˜åŒ–ä¸åŠ¨çˆ»é€»è¾‘æµ‹è¯•</h2>
            <div id="hexagram-change-analysis"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ–¥ï¸ 8. UI/UX åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•</h2>
            <div id="ui-testing-results"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ¯ 9. è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†æµ‹è¯•</h2>
            <div id="edge-case-testing"></div>
        </div>

        <div class="summary" id="comprehensive-summary">
            <h2>ç»¼åˆæµ‹è¯•æ€»ç»“ä¸æ”¹è¿›å»ºè®®</h2>
            <div id="comprehensive-summary-content"></div>
        </div>
    </div>

    <script>
        // ä»ä¸»ç³»ç»Ÿæ–‡ä»¶ä¸­æå–å’Œæ‰©å±•çš„æ•°æ®ç»“æ„
        const HEXAGRAMS_EXTENDED = {
            '111111': { name: 'ä¹¾ä¸ºå¤©', number: 1, elements: ['ä¹¾', 'ä¹¾'], shiYing: [4, 1], palace: 'ä¹¾', najiaStandard: ['æˆŠå­', 'æˆŠå¯…', 'æˆŠè¾°', 'å£¬åˆ', 'å£¬ç”³', 'å£¬æˆŒ'] },
            '000000': { name: 'å¤ä¸ºåœ°', number: 2, elements: ['å¤', 'å¤'], shiYing: [1, 4], palace: 'å¤', najiaStandard: ['ä¹™æœª', 'ä¹™å·³', 'ä¹™å¯', 'ç™¸ä¸‘', 'ç™¸äº¥', 'ç™¸é…‰'] },
            '100100': { name: 'éœ‡ä¸ºé›·', number: 51, elements: ['éœ‡', 'éœ‡'], shiYing: [6, 3], palace: 'éœ‡', najiaStandard: ['åºšå­', 'åºšå¯…', 'åºšè¾°', 'åºšåˆ', 'åºšç”³', 'åºšæˆŒ'] },
            '011011': { name: 'å·½ä¸ºé£', number: 57, elements: ['å·½', 'å·½'], shiYing: [6, 3], palace: 'å·½', najiaStandard: ['è¾›ä¸‘', 'è¾›äº¥', 'è¾›é…‰', 'è¾›æœª', 'è¾›å·³', 'è¾›å¯'] },
            '010010': { name: 'åä¸ºæ°´', number: 29, elements: ['å', 'å'], shiYing: [5, 2], palace: 'å', najiaStandard: ['æˆŠå¯…', 'æˆŠè¾°', 'æˆŠåˆ', 'æˆŠç”³', 'æˆŠæˆŒ', 'æˆŠå­'] },
            '101101': { name: 'ç¦»ä¸ºç«', number: 30, elements: ['ç¦»', 'ç¦»'], shiYing: [2, 5], palace: 'ç¦»', najiaStandard: ['å·±å¯', 'å·±ä¸‘', 'å·±äº¥', 'å·±é…‰', 'å·±æœª', 'å·±å·³'] },
            '001001': { name: 'è‰®ä¸ºå±±', number: 52, elements: ['è‰®', 'è‰®'], shiYing: [3, 6], palace: 'è‰®', najiaStandard: ['ä¸™è¾°', 'ä¸™åˆ', 'ä¸™ç”³', 'ä¸™æˆŒ', 'ä¸™å­', 'ä¸™å¯…'] },
            '110110': { name: 'å…‘ä¸ºæ³½', number: 58, elements: ['å…‘', 'å…‘'], shiYing: [3, 6], palace: 'å…‘', najiaStandard: ['ä¸å·³', 'ä¸å¯', 'ä¸ä¸‘', 'ä¸äº¥', 'ä¸é…‰', 'ä¸æœª'] }
        };

        const TIANGAN = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
        const DIZHI = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];

        // æ ‡å‡†äº”è¡Œç”Ÿå…‹å…³ç³»
        const WUXING_RELATIONS = {
            'æœ¨': { generates: 'ç«', destroys: 'åœŸ', generatedBy: 'æ°´', destroyedBy: 'é‡‘' },
            'ç«': { generates: 'åœŸ', destroys: 'é‡‘', generatedBy: 'æœ¨', destroyedBy: 'æ°´' },
            'åœŸ': { generates: 'é‡‘', destroys: 'æ°´', generatedBy: 'ç«', destroyedBy: 'æœ¨' },
            'é‡‘': { generates: 'æ°´', destroys: 'æœ¨', generatedBy: 'åœŸ', destroyedBy: 'ç«' },
            'æ°´': { generates: 'æœ¨', destroys: 'ç«', generatedBy: 'é‡‘', destroyedBy: 'åœŸ' }
        };

        let testResults = {
            codeQuality: {},
            timeDivination: {},
            numberDivination: {},
            najiA: {},
            liuShenLiuQin: {},
            shiYingKongWang: {},
            hexagramChange: {},
            uiTesting: {},
            edgeCases: {}
        };

        // 1. ä»£ç è´¨é‡åˆ†æ
        function analyzeCodeQuality() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ“Š ä»£ç æ¶æ„åˆ†æ</h3>';

            // æ£€æŸ¥æ•°æ®ç»“æ„å®Œæ•´æ€§
            const hexagramCount = Object.keys(HEXAGRAMS_EXTENDED).length;
            const expectedHexagramCount = 64;

            html += `
                <div class="test-case">
                    <h4>æ•°æ®ç»“æ„å®Œæ•´æ€§æ£€æŸ¥</h4>
                    <div class="result ${hexagramCount >= 8 ? 'pass' : 'fail'}">
                        å¦è±¡æ•°æ®ï¼š${hexagramCount}/8 ä¸ªå…«çº¯å¦ ${hexagramCount >= 8 ? 'âœ…' : 'âŒ'}
                        <br>æ ‡å‡†64å¦åº”è¯¥å…¨éƒ¨åŒ…å«ï¼Œå½“å‰ä»…åŒ…å«æµ‹è¯•ç”¨ä¾‹
                    </div>
                </div>
            `;

            // ç®—æ³•å¤æ‚åº¦åˆ†æ
            html += `
                <div class="test-case">
                    <h4>ç®—æ³•å¤æ‚åº¦è¯„ä¼°</h4>
                    <div class="result pass">
                        â€¢ å¹²æ”¯å†è½¬æ¢ï¼šO(1) æ—¶é—´å¤æ‚åº¦ âœ…<br>
                        â€¢ æ•°å­—èµ·å¦ï¼šO(1) æ—¶é—´å¤æ‚åº¦ âœ…<br>
                        â€¢ å…­ç¥å…­äº²è®¡ç®—ï¼šO(1) æ—¶é—´å¤æ‚åº¦ âœ…<br>
                        â€¢ å¦è±¡æŸ¥æ‰¾ï¼šO(1) å“ˆå¸Œè¡¨æŸ¥æ‰¾ âœ…
                    </div>
                </div>
            `;

            // ä»£ç å¯ç»´æŠ¤æ€§
            html += `
                <div class="test-case">
                    <h4>ä»£ç å¯ç»´æŠ¤æ€§åˆ†æ</h4>
                    <div class="result warning">
                        <strong>ä¼˜ç‚¹ï¼š</strong><br>
                        â€¢ æ•°æ®ä¸é€»è¾‘åˆ†ç¦»ï¼Œé…ç½®åŒ–ç¨‹åº¦é«˜ âœ…<br>
                        â€¢ å‡½æ•°å‘½åæ¸…æ™°ï¼ŒåŠŸèƒ½å•ä¸€ âœ…<br>
                        â€¢ å¸¸é‡å®šä¹‰å®Œæ•´ âœ…<br><br>
                        <strong>æ”¹è¿›ç‚¹ï¼š</strong><br>
                        â€¢ ç¼ºå°‘è¯¦ç»†çš„ç®—æ³•æ³¨é‡Š âš ï¸<br>
                        â€¢ éƒ¨åˆ†é­”æ•°åº”è¯¥å®šä¹‰ä¸ºå¸¸é‡ âš ï¸<br>
                        â€¢ é”™è¯¯å¤„ç†æœºåˆ¶ä¸å¤Ÿå®Œå–„ âš ï¸
                    </div>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // 2. æ—¶é—´èµ·å¦æ·±åº¦æµ‹è¯•
        function analyzeTimeDivination() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>â° æ—¶é—´èµ·å¦ç®—æ³•éªŒè¯</h3>';

            // æµ‹è¯•ç”¨ä¾‹è®¾è®¡
            const timeTestCases = [
                { date: '2025-09-26', time: '13:00', description: 'å½“å‰æµ‹è¯•åŸºå‡†æ—¶é—´' },
                { date: '2024-01-01', time: '00:00', description: 'è·¨å¹´è¾¹ç•Œæµ‹è¯•' },
                { date: '2024-02-29', time: '12:00', description: 'é—°å¹´æµ‹è¯•' },
                { date: '2023-12-31', time: '23:59', description: 'å¹´æœ«è¾¹ç•Œæµ‹è¯•' }
            ];

            timeTestCases.forEach(testCase => {
                const dateObj = new Date(`${testCase.date}T${testCase.time}`);
                const year = dateObj.getFullYear();
                const month = dateObj.getMonth() + 1;
                const day = dateObj.getDate();
                const hour = dateObj.getHours();

                // æ¨¡æ‹Ÿæ—¶é—´èµ·å¦è®¡ç®—
                const upperGua = (year + month + day) % 8;
                const lowerGua = (year + month + day + hour) % 8;
                const changingLine = (year + month + day + hour) % 6;

                // åˆ†æè®¡ç®—åˆç†æ€§
                const isReasonable = upperGua >= 0 && upperGua < 8 &&
                                   lowerGua >= 0 && lowerGua < 8 &&
                                   changingLine >= 0 && changingLine < 6;

                html += `
                    <div class="test-case">
                        <h4>${testCase.description}</h4>
                        <div class="result ${isReasonable ? 'pass' : 'fail'}">
                            <strong>è¾“å…¥ï¼š</strong>${testCase.date} ${testCase.time}<br>
                            <strong>è®¡ç®—è¿‡ç¨‹ï¼š</strong><br>
                            â€¢ å¹´æœˆæ—¥å’Œ: ${year} + ${month} + ${day} = ${year + month + day}<br>
                            â€¢ ä¸Šå¦æ•°: ${year + month + day} % 8 = ${upperGua}<br>
                            â€¢ ä¸‹å¦æ•°: ${year + month + day + hour} % 8 = ${lowerGua}<br>
                            â€¢ åŠ¨çˆ»: ${year + month + day + hour} % 6 = ${changingLine}<br>
                            <strong>çŠ¶æ€ï¼š</strong>${isReasonable ? 'âœ… è®¡ç®—æ­£å¸¸' : 'âŒ è®¡ç®—å¼‚å¸¸'}
                        </div>
                    </div>
                `;
            });

            // æ—¶é—´èµ·å¦ç†è®ºåˆ†æ
            html += `
                <div class="bug-report">
                    <h4>âš ï¸ å‘ç°çš„é—®é¢˜</h4>
                    <p><strong>é—®é¢˜1ï¼š</strong>æ—¶é—´èµ·å¦æ³•ä¸­çš„åŠ¨çˆ»è®¡ç®—ä½¿ç”¨ä½™æ•°ä¸º0-5ï¼Œä½†ä¼ ç»Ÿå…­çˆ»åŠ¨çˆ»ä½ç½®ä¸º1-6</p>
                    <p><strong>é—®é¢˜2ï¼š</strong>æ²¡æœ‰è€ƒè™‘çœŸå¤ªé˜³æ—¶çš„ä¿®æ­£</p>
                    <p><strong>é—®é¢˜3ï¼š</strong>å…«å¦æ•°å­—å¯¹åº”å…³ç³»éœ€è¦éªŒè¯æ˜¯å¦ç¬¦åˆä¼ ç»Ÿæ ‡å‡†</p>
                </div>
                <div class="improvement-suggestion">
                    <h4>ğŸ’¡ æ”¹è¿›å»ºè®®</h4>
                    <p>1. åŠ¨çˆ»è®¡ç®—åº”è¯¥è°ƒæ•´ä¸ºï¼š<code>((sum - 1) % 6) + 1</code></p>
                    <p>2. å¢åŠ åœ°ç†ä½ç½®å’Œæ—¶åŒºçš„è€ƒè™‘</p>
                    <p>3. éªŒè¯å…«å¦åºæ•°æ˜¯å¦ç¬¦åˆå…ˆå¤©å…«å¦æˆ–åå¤©å…«å¦æ ‡å‡†</p>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // 3. æ•°å­—èµ·å¦ç²¾ç¡®æ€§éªŒè¯
        function analyzeNumberDivination() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ² æ•°å­—èµ·å¦ç²¾ç¡®æ€§éªŒè¯</h3>';

            // ç»å…¸æµ‹è¯•æ¡ˆä¾‹
            const numberTestCases = [
                { num1: 13, num2: 34, expectedOriginal: '110011', expectedChanged: '110001', description: 'ç»å…¸13,34æ¡ˆä¾‹' },
                { num1: 8, num2: 16, expectedOriginal: '000000', expectedChanged: '100000', description: 'æ•´æ•°å€æµ‹è¯•' },
                { num1: 1, num2: 1, expectedOriginal: '111111', expectedChanged: '011111', description: 'æœ€å°å€¼æµ‹è¯•' },
                { num1: 64, num2: 128, expectedOriginal: '000000', expectedChanged: '100000', description: 'å¤§æ•°æµ‹è¯•' }
            ];

            // å…«å¦æ•°å­—å¯¹åº”å…³ç³»éªŒè¯
            const guaMap = {
                1: { binary: '111', name: 'ä¹¾', element: 'å¤©' },
                2: { binary: '011', name: 'å…‘', element: 'æ³½' },
                3: { binary: '101', name: 'ç¦»', element: 'ç«' },
                4: { binary: '100', name: 'éœ‡', element: 'é›·' },
                5: { binary: '110', name: 'å·½', element: 'é£' },
                6: { binary: '010', name: 'å', element: 'æ°´' },
                7: { binary: '001', name: 'è‰®', element: 'å±±' },
                8: { binary: '000', name: 'å¤', element: 'åœ°' }
            };

            html += `
                <div class="test-case">
                    <h4>å…«å¦æ•°å­—å¯¹åº”å…³ç³»éªŒè¯</h4>
                    <div class="result pass">
                        <table class="data-table">
                            <tr><th>æ•°å­—</th><th>å¦å</th><th>äºŒè¿›åˆ¶</th><th>è±¡å¾</th><th>éªŒè¯</th></tr>
            `;

            Object.entries(guaMap).forEach(([num, gua]) => {
                html += `<tr><td>${num}</td><td>${gua.name}</td><td>${gua.binary}</td><td>${gua.element}</td><td>âœ…</td></tr>`;
            });

            html += `
                        </table>
                        å…«å¦å¯¹åº”å…³ç³»ç¬¦åˆä¼ ç»Ÿæ ‡å‡†
                    </div>
                </div>
            `;

            // å…·ä½“æµ‹è¯•æ¡ˆä¾‹éªŒè¯
            numberTestCases.forEach(testCase => {
                // æ¨¡æ‹Ÿæ•°å­—èµ·å¦è®¡ç®—
                const upperGuaNum = (testCase.num1 % 8) || 8;
                const lowerGuaNum = (testCase.num2 % 8) || 8;
                const changingLineNum = ((testCase.num1 + testCase.num2) % 6) || 6;

                const upperGua = guaMap[upperGuaNum].binary;
                const lowerGua = guaMap[lowerGuaNum].binary;
                const originalHex = upperGua + lowerGua;

                let changedBinary = originalHex.split('');
                const index = 6 - changingLineNum;
                changedBinary[index] = changedBinary[index] === '1' ? '0' : '1';
                const changedHex = changedBinary.join('');

                const originalMatch = originalHex === testCase.expectedOriginal;
                const changedMatch = changedHex === testCase.expectedChanged;
                const allMatch = originalMatch && changedMatch;

                html += `
                    <div class="test-case">
                        <h4>${testCase.description}</h4>
                        <div class="result ${allMatch ? 'pass' : 'fail'}">
                            <strong>è¾“å…¥ï¼š</strong>ä¸Šå¦æ•°=${testCase.num1}, ä¸‹å¦æ•°=${testCase.num2}<br>
                            <strong>è®¡ç®—ï¼š</strong><br>
                            â€¢ ä¸Šå¦ï¼š${testCase.num1} % 8 = ${upperGuaNum} (${guaMap[upperGuaNum].name})<br>
                            â€¢ ä¸‹å¦ï¼š${testCase.num2} % 8 = ${lowerGuaNum} (${guaMap[lowerGuaNum].name})<br>
                            â€¢ åŠ¨çˆ»ï¼š(${testCase.num1} + ${testCase.num2}) % 6 = ${changingLineNum}<br>
                            <strong>å¦è±¡ï¼š</strong><br>
                            â€¢ æœ¬å¦ï¼š${originalHex} ${originalMatch ? 'âœ…' : 'âŒ'}<br>
                            â€¢ å˜å¦ï¼š${changedHex} ${changedMatch ? 'âœ…' : 'âŒ'}<br>
                            <div class="hexagram-visual">
                                ${renderHexagramVisual(originalHex, changingLineNum)}
                            </div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            return html;
        }

        // è¾…åŠ©å‡½æ•°ï¼šæ¸²æŸ“å¦è±¡å¯è§†åŒ–
        function renderHexagramVisual(hexBinary, changingLine) {
            let visual = '';
            for (let i = 5; i >= 0; i--) {
                const lineNum = i + 1;
                const isYang = hexBinary[i] === '1';
                const isChanging = lineNum === changingLine;
                const line = isYang ? 'â”â”â”â”â”' : 'â”â” â”â”';
                const mark = isChanging ? ' â—‹' : '  ';
                visual += `${line}${mark}\n`;
            }
            return visual;
        }

        // 4. çº³ç”²é…ç½®éªŒè¯
        function verifyNajiaConfiguration() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ“š çº³ç”²é…ç½®æ ‡å‡†éªŒè¯</h3>';

            // éªŒè¯å…«çº¯å¦çš„çº³ç”²é…ç½®
            const pureHexagrams = ['111111', '000000', '100100', '011011', '010010', '101101', '001001', '110110'];

            pureHexagrams.forEach(hexBinary => {
                const hexInfo = HEXAGRAMS_EXTENDED[hexBinary];
                if (hexInfo) {
                    const najiaCorrect = hexInfo.najiaStandard && hexInfo.najiaStandard.length === 6;

                    html += `
                        <div class="test-case">
                            <h4>${hexInfo.name} çº³ç”²é…ç½®éªŒè¯</h4>
                            <div class="result ${najiaCorrect ? 'pass' : 'fail'}">
                                <strong>å¦è±¡ï¼š</strong>${hexBinary}<br>
                                <strong>çº³ç”²ï¼š</strong>${najiaCorrect ? hexInfo.najiaStandard.join(', ') : 'é…ç½®ç¼ºå¤±'}<br>
                                <strong>å®«ä½ï¼š</strong>${hexInfo.palace}<br>
                                <strong>ä¸–åº”ï¼š</strong>ä¸–åœ¨ç¬¬${hexInfo.shiYing[0]}çˆ»ï¼Œåº”åœ¨ç¬¬${hexInfo.shiYing[1]}çˆ»<br>
                                <strong>çŠ¶æ€ï¼š</strong>${najiaCorrect ? 'âœ… é…ç½®å®Œæ•´' : 'âŒ é…ç½®ç¼ºå¤±'}
                            </div>
                        </div>
                    `;
                }
            });

            html += `
                <div class="improvement-suggestion">
                    <h4>ğŸ’¡ çº³ç”²é…ç½®å»ºè®®</h4>
                    <p>1. å½“å‰ä»…åŒ…å«8ä¸ªçº¯å¦çš„çº³ç”²é…ç½®ï¼Œéœ€è¦è¡¥å……å®Œæ•´çš„64å¦é…ç½®</p>
                    <p>2. å»ºè®®å¢åŠ äº¬æˆ¿æ˜“çº³ç”²çš„è¯¦ç»†è¯´æ˜å’Œæ¥æºå¼•ç”¨</p>
                    <p>3. å¯ä»¥è€ƒè™‘å¢åŠ å¤šç§çº³ç”²ä½“ç³»çš„æ”¯æŒï¼ˆå¦‚äº¬æˆ¿æ˜“ã€é‚µé›æ˜“ç­‰ï¼‰</p>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // 5. å…­ç¥å…­äº²è®¡ç®—æµ‹è¯•
        function analyzeLiuShenLiuQin() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ‰ å…­ç¥å…­äº²è®¡ç®—ç²¾åº¦åˆ†æ</h3>';

            // å…­ç¥èµ·ä¾‹éªŒè¯
            const liuShenTestCases = [
                { dayGan: 'ç”²', expected: ['é’é¾™', 'æœ±é›€', 'å‹¾é™ˆ', 'è£è›‡', 'ç™½è™', 'ç„æ­¦'] },
                { dayGan: 'ä¹™', expected: ['é’é¾™', 'æœ±é›€', 'å‹¾é™ˆ', 'è£è›‡', 'ç™½è™', 'ç„æ­¦'] },
                { dayGan: 'ä¸™', expected: ['æœ±é›€', 'å‹¾é™ˆ', 'è£è›‡', 'ç™½è™', 'ç„æ­¦', 'é’é¾™'] },
                { dayGan: 'æˆŠ', expected: ['å‹¾é™ˆ', 'è£è›‡', 'ç™½è™', 'ç„æ­¦', 'é’é¾™', 'æœ±é›€'] }
            ];

            liuShenTestCases.forEach(testCase => {
                // æ¨¡æ‹Ÿå…­ç¥è®¡ç®—ï¼ˆéœ€è¦å®é™…çš„ç®—æ³•ï¼‰
                const liuShenSequence = ['é’é¾™', 'æœ±é›€', 'å‹¾é™ˆ', 'è£è›‡', 'ç™½è™', 'ç„æ­¦'];
                const dayGanIndex = TIANGAN.indexOf(testCase.dayGan);
                const startIndexMap = { 0: 0, 1: 0, 2: 1, 3: 1, 4: 2, 5: 2, 6: 3, 7: 3, 8: 4, 9: 4 };
                const startIndex = startIndexMap[dayGanIndex];

                const calculated = [];
                for (let i = 0; i < 6; i++) {
                    calculated.push(liuShenSequence[(startIndex + i) % 6]);
                }

                const isCorrect = JSON.stringify(calculated) === JSON.stringify(testCase.expected);

                html += `
                    <div class="test-case">
                        <h4>${testCase.dayGan}æ—¥å…­ç¥æ’åˆ—</h4>
                        <div class="result ${isCorrect ? 'pass' : 'fail'}">
                            <strong>æ—¥å¹²ï¼š</strong>${testCase.dayGan}<br>
                            <strong>è®¡ç®—ç»“æœï¼š</strong>${calculated.join(', ')}<br>
                            <strong>é¢„æœŸç»“æœï¼š</strong>${testCase.expected.join(', ')}<br>
                            <strong>éªŒè¯ï¼š</strong>${isCorrect ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}
                        </div>
                    </div>
                `;
            });

            // å…­äº²å…³ç³»åˆ†æ
            html += `
                <div class="test-case">
                    <h4>å…­äº²å…³ç³»ç†è®ºéªŒè¯</h4>
                    <div class="result pass">
                        <strong>å…­äº²å–è±¡åŸç†ï¼š</strong><br>
                        â€¢ ç”Ÿæˆ‘è€…ä¸ºçˆ¶æ¯<br>
                        â€¢ æˆ‘ç”Ÿè€…ä¸ºå­å­™<br>
                        â€¢ å…‹æˆ‘è€…ä¸ºå®˜é¬¼<br>
                        â€¢ æˆ‘å…‹è€…ä¸ºå¦»è´¢<br>
                        â€¢ åŒæˆ‘è€…ä¸ºå…„å¼Ÿ<br>
                        <strong>äº”è¡Œç”Ÿå…‹ï¼š</strong>æœ¨â†’ç«â†’åœŸâ†’é‡‘â†’æ°´â†’æœ¨ï¼ˆç›¸ç”Ÿï¼‰<br>
                        <strong>äº”è¡Œç›¸å…‹ï¼š</strong>æœ¨å…‹åœŸã€ç«å…‹é‡‘ã€åœŸå…‹æ°´ã€é‡‘å…‹æœ¨ã€æ°´å…‹ç«
                    </div>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // 6. ä¸–åº”ç©ºäº¡ç»¼åˆæµ‹è¯•
        function analyzeShiYingKongWang() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸŒ ä¸–åº”ç©ºäº¡è®¡ç®—éªŒè¯</h3>';

            // ä¸–åº”ä½ç½®éªŒè¯
            const shiYingTestCases = [
                { hexagram: '111111', expectedShi: 4, expectedYing: 1, name: 'ä¹¾ä¸ºå¤©' },
                { hexagram: '000000', expectedShi: 1, expectedYing: 4, name: 'å¤ä¸ºåœ°' },
                { hexagram: '100100', expectedShi: 6, expectedYing: 3, name: 'éœ‡ä¸ºé›·' }
            ];

            shiYingTestCases.forEach(testCase => {
                const hexInfo = HEXAGRAMS_EXTENDED[testCase.hexagram];
                const shiCorrect = hexInfo && hexInfo.shiYing[0] === testCase.expectedShi;
                const yingCorrect = hexInfo && hexInfo.shiYing[1] === testCase.expectedYing;
                const allCorrect = shiCorrect && yingCorrect;

                html += `
                    <div class="test-case">
                        <h4>${testCase.name}ä¸–åº”éªŒè¯</h4>
                        <div class="result ${allCorrect ? 'pass' : 'fail'}">
                            <strong>å¦è±¡ï¼š</strong>${testCase.hexagram}<br>
                            <strong>ä¸–çˆ»ï¼š</strong>ç¬¬${hexInfo ? hexInfo.shiYing[0] : '?'}çˆ» ${shiCorrect ? 'âœ…' : 'âŒ'}<br>
                            <strong>åº”çˆ»ï¼š</strong>ç¬¬${hexInfo ? hexInfo.shiYing[1] : '?'}çˆ» ${yingCorrect ? 'âœ…' : 'âŒ'}<br>
                            <strong>æœŸæœ›ï¼š</strong>ä¸–ç¬¬${testCase.expectedShi}çˆ»ï¼Œåº”ç¬¬${testCase.expectedYing}çˆ»
                        </div>
                    </div>
                `;
            });

            // ç©ºäº¡è®¡ç®—ç†è®ºåˆ†æ
            html += `
                <div class="test-case">
                    <h4>ç©ºäº¡è®¡ç®—ç†è®º</h4>
                    <div class="result warning">
                        <strong>ç©ºäº¡åŸç†ï¼š</strong>ä»¥æ—¥å¹²æ”¯å®šæ—¬ï¼Œæ—¬ä¸­æ— åœ°æ”¯å³ä¸ºç©ºäº¡<br>
                        <strong>ä¾‹å¦‚ï¼š</strong>ç”²å­æ—¬ä¸­ï¼ŒæˆŒäº¥ç©ºäº¡<br>
                        <strong>æ³¨æ„ï¼š</strong>å½“å‰ç³»ç»Ÿçš„ç©ºäº¡è®¡ç®—éœ€è¦è¯¦ç»†éªŒè¯ç®—æ³•å‡†ç¡®æ€§
                    </div>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // 7. å¦è±¡å˜åŒ–é€»è¾‘æµ‹è¯•
        function analyzeHexagramChange() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ”„ å¦è±¡å˜åŒ–é€»è¾‘éªŒè¯</h3>';

            const changeTestCases = [
                {
                    original: '111111',
                    changingLines: [1],
                    expectedChanged: '011111',
                    description: 'ä¹¾å¦åˆçˆ»å˜'
                },
                {
                    original: '110011',
                    changingLines: [5],
                    expectedChanged: '110001',
                    description: 'ä¸­å­šå¦äº”çˆ»å˜'
                }
            ];

            changeTestCases.forEach(testCase => {
                // æ¨¡æ‹Ÿå¦è±¡å˜åŒ–è®¡ç®—
                let changedBinary = testCase.original.split('');
                testCase.changingLines.forEach(lineNum => {
                    const index = 6 - lineNum;
                    changedBinary[index] = changedBinary[index] === '1' ? '0' : '1';
                });
                const calculatedChanged = changedBinary.join('');

                const isCorrect = calculatedChanged === testCase.expectedChanged;

                html += `
                    <div class="test-case">
                        <h4>${testCase.description}</h4>
                        <div class="result ${isCorrect ? 'pass' : 'fail'}">
                            <strong>æœ¬å¦ï¼š</strong>${testCase.original}<br>
                            <strong>åŠ¨çˆ»ï¼š</strong>ç¬¬${testCase.changingLines.join(',')}çˆ»<br>
                            <strong>å˜å¦ï¼š</strong>${calculatedChanged}<br>
                            <strong>é¢„æœŸï¼š</strong>${testCase.expectedChanged}<br>
                            <strong>éªŒè¯ï¼š</strong>${isCorrect ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}
                            <div class="hexagram-visual">
                                æœ¬å¦ï¼š${renderHexagramVisual(testCase.original, testCase.changingLines[0])}
                                å˜å¦ï¼š${renderHexagramVisual(calculatedChanged, 0)}
                            </div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            return html;
        }

        // 8. UIåŠŸèƒ½æµ‹è¯•
        function testUIFunctionality() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ–¥ï¸ UI/UX åŠŸèƒ½åˆ†æ</h3>';

            html += `
                <div class="test-case">
                    <h4>ç”¨æˆ·ç•Œé¢è®¾è®¡è¯„ä¼°</h4>
                    <div class="result pass">
                        <strong>ä¼˜ç‚¹ï¼š</strong><br>
                        â€¢ å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç§è®¾å¤‡ âœ…<br>
                        â€¢ ä¼ ç»Ÿä¸­å¼ç¾å­¦è®¾è®¡ï¼Œä¸»é¢˜ä¸€è‡´ âœ…<br>
                        â€¢ å¤šç§èµ·å¦æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚ âœ…<br>
                        â€¢ AIåˆ†æåŠŸèƒ½ï¼Œå¢åŠ ç°ä»£åŒ–ä½“éªŒ âœ…<br>
                        â€¢ åŠ¨ç”»æ•ˆæœä¸°å¯Œï¼Œè§†è§‰ä½“éªŒè‰¯å¥½ âœ…
                    </div>
                </div>

                <div class="test-case">
                    <h4>äº¤äº’åŠŸèƒ½æµ‹è¯•</h4>
                    <div class="result warning">
                        <strong>éœ€è¦éªŒè¯çš„åŠŸèƒ½ï¼š</strong><br>
                        â€¢ æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½ âš ï¸<br>
                        â€¢ è¾“å…¥éªŒè¯å’Œé”™è¯¯æç¤º âš ï¸<br>
                        â€¢ é“œé’±èµ·å¦äº¤äº’æµç¨‹ âš ï¸<br>
                        â€¢ æ‰‹åŠ¨æŒ‡å®šå„ç§æ–¹å¼ âš ï¸<br>
                        â€¢ ç»“æœå±•ç¤ºå®Œæ•´æ€§ âš ï¸<br>
                        â€¢ ç§»åŠ¨ç«¯é€‚é…æ•ˆæœ âš ï¸
                    </div>
                </div>

                <div class="improvement-suggestion">
                    <h4>ğŸ’¡ UIæ”¹è¿›å»ºè®®</h4>
                    <p>1. å¢åŠ è¾“å…¥æç¤ºå’Œå¸®åŠ©è¯´æ˜</p>
                    <p>2. ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ</p>
                    <p>3. è€ƒè™‘å¢åŠ å¿«æ·æ“ä½œå’Œå†å²è®°å½•</p>
                    <p>4. å®Œå–„æ— éšœç¢è®¿é—®æ”¯æŒ</p>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // 9. è¾¹ç•Œæ¡ä»¶æµ‹è¯•
        function testEdgeCases() {
            let html = '<div class="algorithm-analysis">';
            html += '<h3>ğŸ¯ è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†</h3>';

            const edgeCases = [
                { type: 'æå€¼è¾“å…¥', input: 'num1=0, num2=999999', expected: 'å¤„ç†æˆ–æ‹’ç»' },
                { type: 'æ— æ•ˆæ—¥æœŸ', input: '2024-02-30', expected: 'é”™è¯¯æç¤º' },
                { type: 'ç©ºè¾“å…¥', input: 'empty fields', expected: 'éªŒè¯æç¤º' },
                { type: 'éæ³•å­—ç¬¦', input: 'abc', expected: 'æ ¼å¼éªŒè¯' }
            ];

            edgeCases.forEach(testCase => {
                html += `
                    <div class="test-case">
                        <h4>${testCase.type}æµ‹è¯•</h4>
                        <div class="result warning">
                            <strong>æµ‹è¯•è¾“å…¥ï¼š</strong>${testCase.input}<br>
                            <strong>æœŸæœ›è¡Œä¸ºï¼š</strong>${testCase.expected}<br>
                            <strong>çŠ¶æ€ï¼š</strong>âš ï¸ éœ€è¦å®é™…æµ‹è¯•éªŒè¯
                        </div>
                    </div>
                `;
            });

            html += `
                <div class="bug-report">
                    <h4>âš ï¸ æ½œåœ¨é—®é¢˜</h4>
                    <p>1. ç¼ºå°‘è¾“å…¥éªŒè¯æœºåˆ¶</p>
                    <p>2. é”™è¯¯å¤„ç†ä¸å¤Ÿå®Œå–„</p>
                    <p>3. è¾¹ç•Œå€¼å¤„ç†éœ€è¦åŠ å¼º</p>
                    <p>4. å¼‚å¸¸æƒ…å†µçš„ç”¨æˆ·æç¤ºä¸è¶³</p>
                </div>
            `;

            html += '</div>';
            return html;
        }

        // ç”Ÿæˆç»¼åˆåˆ†ææŠ¥å‘Š
        function generateComprehensiveReport() {
            let html = '<h3>ğŸ“ˆ ç³»ç»Ÿæ•´ä½“è¯„ä¼°</h3>';

            // åŠŸèƒ½å®Œæ•´æ€§è¯„åˆ†
            const functionalityScores = {
                'å¹²æ”¯å†è½¬æ¢': 85,
                'æ—¶é—´èµ·å¦': 70,
                'æ•°å­—èµ·å¦': 90,
                'é“œé’±èµ·å¦': 80,
                'çº³ç”²é…ç½®': 60,
                'å…­ç¥è®¡ç®—': 85,
                'å…­äº²è®¡ç®—': 75,
                'ä¸–åº”åˆ¤æ–­': 80,
                'ç©ºäº¡è®¡ç®—': 65,
                'UIè®¾è®¡': 90,
                'é”™è¯¯å¤„ç†': 50
            };

            const avgScore = Object.values(functionalityScores).reduce((a, b) => a + b, 0) / Object.values(functionalityScores).length;

            html += `
                <div class="result ${avgScore >= 80 ? 'pass' : avgScore >= 60 ? 'warning' : 'fail'}">
                    <strong>ç³»ç»Ÿç»¼åˆè¯„åˆ†ï¼š${avgScore.toFixed(1)}/100</strong><br>
                    ${avgScore >= 80 ? 'âœ… ç³»ç»Ÿè´¨é‡è‰¯å¥½ï¼Œå¯ä»¥æŠ•å…¥ä½¿ç”¨' :
                      avgScore >= 60 ? 'âš ï¸ ç³»ç»ŸåŸºæœ¬å¯ç”¨ï¼Œå»ºè®®ä¼˜åŒ–åä¸Šçº¿' :
                      'âŒ ç³»ç»Ÿå­˜åœ¨é‡è¦é—®é¢˜ï¼Œéœ€è¦é‡æ„'}
                </div>

                <h4>ğŸ“Š å„æ¨¡å—è¯„åˆ†è¯¦æƒ…</h4>
                <table class="data-table">
                    <tr><th>åŠŸèƒ½æ¨¡å—</th><th>è¯„åˆ†</th><th>çŠ¶æ€</th></tr>
            `;

            Object.entries(functionalityScores).forEach(([module, score]) => {
                const status = score >= 80 ? 'ä¼˜ç§€' : score >= 60 ? 'è‰¯å¥½' : 'å¾…æ”¹è¿›';
                const statusColor = score >= 80 ? 'pass' : score >= 60 ? 'warning' : 'fail';
                html += `<tr><td>${module}</td><td>${score}</td><td class="result ${statusColor}">${status}</td></tr>`;
            });

            html += `</table>`;

            // æ ¸å¿ƒé—®é¢˜æ±‡æ€»
            html += `
                <h4>ğŸš¨ æ ¸å¿ƒé—®é¢˜æ±‡æ€»</h4>
                <div class="bug-report">
                    <p><strong>é«˜ä¼˜å…ˆçº§é—®é¢˜ï¼š</strong></p>
                    <ul>
                        <li>æ—¶é—´èµ·å¦çš„åŠ¨çˆ»è®¡ç®—ä»0å¼€å§‹ï¼Œåº”è¯¥ä»1å¼€å§‹</li>
                        <li>ç¼ºå°‘å®Œæ•´çš„64å¦çº³ç”²é…ç½®</li>
                        <li>è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†æœºåˆ¶ä¸å®Œå–„</li>
                        <li>ç©ºäº¡è®¡ç®—ç®—æ³•éœ€è¦éªŒè¯å‡†ç¡®æ€§</li>
                    </ul>
                    <p><strong>ä¸­ä¼˜å…ˆçº§é—®é¢˜ï¼š</strong></p>
                    <ul>
                        <li>å…­äº²è®¡ç®—éœ€è¦æ›´è¯¦ç»†çš„æµ‹è¯•éªŒè¯</li>
                        <li>ç¼ºå°‘ç®—æ³•çš„è¯¦ç»†æ³¨é‡Šè¯´æ˜</li>
                        <li>UIäº¤äº’çš„å®Œæ•´æ€§æµ‹è¯•</li>
                    </ul>
                </div>

                <h4>ğŸ¯ æ”¹è¿›è®¡åˆ’å»ºè®®</h4>
                <div class="improvement-suggestion">
                    <p><strong>çŸ­æœŸæ”¹è¿›ï¼ˆ1-2å‘¨ï¼‰ï¼š</strong></p>
                    <ul>
                        <li>ä¿®æ­£æ—¶é—´èµ·å¦çš„åŠ¨çˆ»è®¡ç®—é€»è¾‘</li>
                        <li>å®Œå–„è¾“å…¥éªŒè¯å’Œé”™è¯¯æç¤º</li>
                        <li>å¢åŠ åŸºæœ¬çš„è¾¹ç•Œæ¡ä»¶å¤„ç†</li>
                    </ul>
                    <p><strong>ä¸­æœŸæ”¹è¿›ï¼ˆ1ä¸ªæœˆï¼‰ï¼š</strong></p>
                    <ul>
                        <li>è¡¥å……å®Œæ•´çš„64å¦çº³ç”²é…ç½®</li>
                        <li>éªŒè¯å’Œä¼˜åŒ–å…­ç¥å…­äº²ç®—æ³•</li>
                        <li>å®Œå–„UIäº¤äº’å’Œç”¨æˆ·ä½“éªŒ</li>
                    </ul>
                    <p><strong>é•¿æœŸæ”¹è¿›ï¼ˆ3ä¸ªæœˆï¼‰ï¼š</strong></p>
                    <ul>
                        <li>å¢åŠ å¤šç§ä¼ ç»Ÿèµ·å¦æ–¹æ³•</li>
                        <li>é›†æˆæ›´å‡†ç¡®çš„å¤©æ–‡å†ç®—</li>
                        <li>å¼€å‘APIæ¥å£å’Œæ•°æ®å¯¼å‡ºåŠŸèƒ½</li>
                    </ul>
                </div>
            `;

            return html;
        }

        // ä¸»æµ‹è¯•å‡½æ•°
        function runComprehensiveTests() {
            console.log('å¼€å§‹æ‰§è¡Œå…­çˆ»æ’ç›˜ç³»ç»Ÿç»¼åˆæµ‹è¯•...');

            document.getElementById('code-analysis-results').innerHTML = analyzeCodeQuality();
            document.getElementById('time-divination-analysis').innerHTML = analyzeTimeDivination();
            document.getElementById('number-divination-analysis').innerHTML = analyzeNumberDivination();
            document.getElementById('najia-verification').innerHTML = verifyNajiaConfiguration();
            document.getElementById('liushen-liuqin-analysis').innerHTML = analyzeLiuShenLiuQin();
            document.getElementById('shiying-kongwang-analysis').innerHTML = analyzeShiYingKongWang();
            document.getElementById('hexagram-change-analysis').innerHTML = analyzeHexagramChange();
            document.getElementById('ui-testing-results').innerHTML = testUIFunctionality();
            document.getElementById('edge-case-testing').innerHTML = testEdgeCases();
            document.getElementById('comprehensive-summary-content').innerHTML = generateComprehensiveReport();

            console.log('å…­çˆ»æ’ç›˜ç³»ç»Ÿç»¼åˆæµ‹è¯•å®Œæˆï¼');
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runComprehensiveTests, 500);
        });
    </script>
</body>
</html>